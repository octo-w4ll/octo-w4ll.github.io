<!DOCTYPE html><html lang="fr"><head>
    <meta charset="UTF-8">
    <meta name="description" content="cookbook">
    <link href="/css/index.css" rel="stylesheet">
    <link href="https://unpkg.com/prismjs@1.26.0/themes/prism-tomorrow.min.css" rel="stylesheet">

    <title>Un panier sticky</title>
  </head>
  <body>
    <header><nav role="navigation" aria-label="main navigation">
  <a href="/"> W4ll @ OCTO Technology </a>
  <a href="/cookbook"> Cookbook </a>
</nav>
</header>
    <main>
      
<article class="cookbook">
    <h1 class="cookbook__title">Un panier sticky</h1>
    <p class="cookbook__parution"> Cette recette a été publiée le <time datetime="4/1/2021">4/1/2021</time> </p>
    <div class="cookbook__content"><h2>Cas d'usage étudié</h2>
<p>Le panier répond aux critères suivants :</p>
<ul>
<li>Il doit être placé dans le corps du contenu</li>
<li>Si le conteneur adjacent (ex: liste des éléments à ajouter au panier) atteint la taille maximale mais pas le panier, le panier restera en position fixe en haut du conteneur et ne sera pas impacté par le scroll du conteneur adjacent</li>
<li>Lorsque le contenu adjacent atteint la taille maximale du conteneur parent (ou de la fenêtre) et le panier aussi, ce dernier passe en overflow (apparition d’une barre de scroll)</li>
</ul>
<p class="illustration--centered">
  <img width="300px" src="./1ecc16a620140dbd93061761a92d25ec15aad24f.png" alt="Critères du panier sticky" integrity="sha1-1ecc16a620140dbd93061761a92d25ec15aad24f">
</p>
<h2>Solution proposée</h2>
<p>La solution proposée peut être testée sur un codepen (bac à sable) : <a href="https://codepen.io/floragc-octo/pen/WNZqPKo">lien vers le codepen.</a></p>
<p>En quelques mots, ce qu'il faut retenir de cette implémentation</p>
<p><strong>position: sticky</strong></p>
<p>Cette propriété CSS va permettre de positionner l'élément auquel elle s'applique de manière... collante. Dans notre exemple, on va s'en servir afin de répondre à l'exigence suivante :</p>
<blockquote>
<p>Le panier restera en position fixe en haut du conteneur et ne sera pas impacté par le scroll du conteneur adjacent</p>
</blockquote>
<p><strong>overflow: scroll</strong></p>
<p>lorsque le panier atteint la taille de son conteneur parent, nous souhaitons qu'apparaisse une barre de défilement (ou <code>scroll</code>). La propriété <code>overflow</code> permet de spécifier le comportement en cas de dépassement du contenu dans son conteneur. La valeur <code>scroll</code> indique ici qu'une barre de défilement apparaîtra.</p>
<h3>code HTML</h3>
<pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fr<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Exemple de panier fixe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- Conteneur adjacent --&gt;</span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- Panier --&gt;</span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Panier<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span><span class="token punctuation">&gt;</span></span><br>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aside</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
<h3>code CSS :</h3>
<pre class="language-css"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span><br>    <span class="token property">--space</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">*</span> <span class="token punctuation">{</span><br>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">main</span> <span class="token punctuation">{</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>    <span class="token property">gap</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><br>  <br>    <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--space<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">main &gt; article</span> <span class="token punctuation">{</span><br>    <span class="token property">border</span><span class="token punctuation">:</span> 3px solid black<span class="token punctuation">;</span><br>    <span class="token property">padding</span><span class="token punctuation">:</span> 10px 20px<span class="token punctuation">;</span><br><br>    <span class="token comment">/* raccourci pour flex-grow / flex-shrink / flex-basic */</span><br>    <span class="token property">flex</span><span class="token punctuation">:</span> 1 1 0<span class="token punctuation">;</span><br>    <br>    <span class="token property">min-width</span><span class="token punctuation">:</span> 40%<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">aside</span> <span class="token punctuation">{</span> <span class="token comment">/* notre panier */</span><br>    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span><br>    <span class="token property">border</span><span class="token punctuation">:</span> 3px solid black<span class="token punctuation">;</span><br>    <span class="token property">padding</span><span class="token punctuation">:</span> 10px 20px<span class="token punctuation">;</span><br><br>    <span class="token comment">/* raccourci pour flex-grow / flex-shrink / flex-basic */</span><br>    <span class="token property">flex</span><span class="token punctuation">:</span> 0 1 600px<span class="token punctuation">;</span><br>  <br>    <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span><br>    <br>    <span class="token property">top</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--space<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--space<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br>    <span class="token property">max-height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh - 2 * <span class="token function">var</span><span class="token punctuation">(</span>--space<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <br>    <span class="token property">overflow</span><span class="token punctuation">:</span> scroll<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2>Autres informations sur le code</h2>
<h3>Les customs properties</h3>
<p>Dans le code vous pouvez voir la notation <code>--space</code> ainsi que <code>var(--space)</code>.</p>
<p>Il s'agit de custom properties CSS, pouvant s'apparenter à des variables.</p>
<p>La propriété se définit avec <code>--ma-propriété</code> et s'utilise avec la notation <code>var(--ma-propriété)</code>.</p>
<h3>Box-sizing</h3>
<p>La propriété CSS box-sizing indique comment seront calculées la hauteur et la largeur d'un élément en prenant en compte tous les éléments qui peuvent l'être: padding, margin, border-size.</p>
<p><code>box-sizing: border-box</code>, dans notre exemple, indique qu'il faut prendre en compte la bordure et le remplissage dans la valeur définie pour la largeur et la hauteur.</p>
<p>Pourquoi cela est nécessaire: nous calculons la max-height, le top et le bottom en pixels afin de positionner le panier en haut du contenu parent et provoquer le scroll lorsque le panier atteint la taille de son parent. Si nous ne spécifions pas ce box-sizing, il nous faudra ajouter la largeur des borders ainsi que les paddings haut et bas du panier dans tous ces calculs.</p>
<h3>Flex properties</h3>
<p>Dans le code nous utilisons le layout <code>flexbox</code> pour positionner la liste des produits et le panier verticalement.</p>
<p>Nous souhaitons que le panier fasse 600px de large et que le contenu adjacent prenne le reste de la place allouée par la taille du parent.</p>
<p>Voici le détails de propriétés utilisées :</p>
<p><code>flex-basis</code>
Cette propriété indique la taille initiale d'un contenu avant qu'il ne soit re-distribué via les autres propriétés flex (notamment le flex-grow, ci-dessous). Nous souhaitons que notre panier fasse 600px de large, pour cela la valeur est fixée à 600px. Nous attribuons ensuite une valeur à 0 pour la liste des produits pour indiquer que nous ne souhaitons pas définir de taille initiale.</p>
<p><code>flex-grow</code>
Cette propriété indique le facteur d'expansion d'un élément, sous la forme d'une proportion comparative aux autres enfants de son parent. Si tous les enfants du parent ont une proportion de 1, ils prendront tous une portion égale du parent (100%/nb d'enfant). Si un de ces enfant a un facteur plus élevé il prendra une place plus importante.</p>
<p>Dans notre exemple, nous avons fixé une taille fixe de 600px au panier, et nous souhaitons que les autres enfants prennent la place restante quel que soit leur contenu. Pour cela, nous n'avons pas fixé le facteur d'expansion pour le panier (par défaut il est à 1) et l'avons fixé à 1 pour la liste des produits qui prendra donc la place restant.</p>
<p>Le fait de fixer le <strong>flex-grow</strong> du panneau gauche à 1 lui permet de prendre tout l'espace restant au sein du parent. Si nous l'avions fixé à 0 il aurait pris la taille minimale possible selon les autres critères: par exemple comme nous lui avons fixé un min-width à 40% il aurait pris cette valeur.</p>
</div>
</article>

    </main>
    <footer>
        Made with ✨ by W4LL
    </footer>
  

</body></html>